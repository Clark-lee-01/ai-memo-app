# Story 2.8: 빈 상태 UI 및 온보딩

## 📋 스토리 정보

- **Epic:** Epic 2 - 노트 관리 시스템
- **Story ID:** 2.8
- **Story Points:** 2
- **Priority:** P2 (Medium)
- **Status:** Ready for Review

## 👤 사용자 스토리

**As a** 새로운 사용자  
**I want to** 노트가 없을 때 친근하고 도움이 되는 안내를 받고 싶다  
**So that** 첫 번째 노트를 작성하는 방법을 쉽게 이해하고 빠르게 시작할 수 있다

## 📝 상세 설명

사용자가 아직 노트를 작성하지 않았거나 모든 노트를 삭제한 상태에서 빈 상태를 표시하는 UI를 제공합니다. 이를 통해 사용자에게 명확한 안내와 행동 유도(CTA)를 제공하여 첫 번째 노트 작성을 쉽게 시작할 수 있도록 도와줍니다.

## ✅ 수용 기준

### 기능 요구사항

1. **빈 상태 감지**
   - 노트 목록이 비어있을 때 자동으로 빈 상태 UI 표시
   - 사용자별로 노트 개수 확인하여 정확한 상태 판단
   - 삭제된 노트는 빈 상태 계산에서 제외

2. **빈 상태 UI 구성요소**
   - 친근하고 시각적으로 매력적인 일러스트레이션
   - 명확한 제목과 설명 텍스트
   - 주요 행동 유도 버튼 (첫 노트 작성하기)
   - 보조 행동 유도 링크 (도움말, 가이드 등)

3. **온보딩 요소**
   - 첫 방문 사용자에게 환영 메시지
   - 노트 작성 방법에 대한 간단한 안내
   - 주요 기능 소개 (제목, 본문, 자동 저장 등)
   - 다음 단계에 대한 명확한 가이드

4. **반응형 디자인**
   - 모바일, 태블릿, 데스크톱에서 일관된 경험
   - 다양한 화면 크기에 맞는 레이아웃 조정
   - 터치 친화적인 버튼 크기

### 기술적 요구사항

1. **컴포넌트 설계**
   - 재사용 가능한 `EmptyState` 컴포넌트
   - props를 통한 유연한 내용 커스터마이징
   - 접근성 고려 (ARIA 라벨, 키보드 네비게이션)

2. **상태 관리**
   - 노트 개수 기반 빈 상태 판단
   - 로딩 상태와 빈 상태 구분
   - 에러 상태와 빈 상태 구분

3. **성능 최적화**
   - 이미지 최적화 (WebP, 적절한 크기)
   - 지연 로딩 적용
   - 번들 크기 최소화

## 🎯 사용자 시나리오

### 시나리오 1: 첫 방문 사용자의 빈 상태
1. 사용자가 회원가입 후 노트 목록 페이지에 접속
2. "아직 노트가 없습니다" 메시지와 함께 빈 상태 UI 표시
3. "첫 번째 노트를 작성해보세요" 안내와 함께 CTA 버튼 제공
4. 사용자가 CTA 버튼을 클릭하여 노트 작성 페이지로 이동

### 시나리오 2: 모든 노트 삭제 후 빈 상태
1. 사용자가 기존 노트들을 모두 삭제
2. 노트 목록 페이지에서 빈 상태 UI 표시
3. "새로운 노트를 작성해보세요" 메시지와 함께 CTA 버튼 제공
4. 사용자가 다시 노트 작성을 시작할 수 있도록 유도

### 시나리오 3: 모바일에서의 빈 상태
1. 모바일 기기에서 노트 목록 페이지 접속
2. 모바일에 최적화된 빈 상태 UI 표시
3. 터치하기 쉬운 크기의 CTA 버튼 제공
4. 세로 화면에서도 잘 보이는 레이아웃

## 🔧 기술적 구현

### 1. EmptyState 컴포넌트 구현

```typescript
// components/notes/empty-state.tsx
interface EmptyStateProps {
  title?: string;
  description?: string;
  actionLabel?: string;
  actionHref?: string;
  illustration?: React.ReactNode;
  variant?: 'default' | 'welcome' | 'deleted';
}

export function EmptyState({
  title = "아직 노트가 없습니다",
  description = "첫 번째 노트를 작성하여 중요한 정보를 기록하고 관리해보세요",
  actionLabel = "첫 노트 작성하기",
  actionHref = "/notes/new",
  illustration,
  variant = "default"
}: EmptyStateProps) {
  return (
    <div className="flex flex-col items-center justify-center py-12 px-4">
      {illustration || <DefaultIllustration />}
      <h3 className="text-xl font-semibold text-gray-900 mt-6 mb-2">
        {title}
      </h3>
      <p className="text-gray-600 text-center max-w-md mb-6">
        {description}
      </p>
      <Button asChild size="lg">
        <Link href={actionHref}>
          <Plus className="h-5 w-5 mr-2" />
          {actionLabel}
        </Link>
      </Button>
    </div>
  );
}
```

### 2. 일러스트레이션 컴포넌트

```typescript
// components/notes/empty-state-illustrations.tsx
export function DefaultIllustration() {
  return (
    <div className="w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center">
      <FileText className="w-12 h-12 text-gray-400" />
    </div>
  );
}

export function WelcomeIllustration() {
  return (
    <div className="w-32 h-32 bg-blue-50 rounded-full flex items-center justify-center">
      <Sparkles className="w-16 h-16 text-blue-400" />
    </div>
  );
}
```

### 3. 노트 목록 페이지에서 빈 상태 처리

```typescript
// app/notes/page.tsx
async function NotesList({ page, sortBy, sortOrder }: NotesListProps) {
  try {
    const { notes, totalCount } = await getNotes({ page, sortBy, sortOrder });

    // 빈 상태 처리
    if (notes.length === 0 && page === 1) {
      return <EmptyState variant="default" />;
    }

    // 노트 목록 렌더링
    return (
      <>
        <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
          {notes.map((note) => (
            <NoteCard key={note.id} note={note} />
          ))}
        </div>
        <Pagination {...paginationProps} />
      </>
    );
  } catch (error) {
    return <ErrorState error={error} />;
  }
}
```

### 4. 메인 페이지에서의 빈 상태

```typescript
// app/page.tsx
export default async function Home() {
  const { notes } = await getNotes({ limit: 6 });
  
  return (
    <div className="min-h-screen bg-gray-50">
      {/* ... */}
      <div className="bg-white rounded-lg shadow-md p-6">
        <div className="flex items-center justify-between mb-4">
          <h3 className="text-lg font-semibold text-gray-900">최근 노트</h3>
          <Link href="/notes" className="text-sm text-blue-600">
            전체 보기
          </Link>
        </div>
        
        {notes.length === 0 ? (
          <EmptyState
            variant="welcome"
            title="첫 번째 노트를 작성해보세요"
            description="AI 메모장에서 아이디어를 기록하고 관리해보세요"
            actionLabel="노트 작성하기"
            actionHref="/notes/new"
          />
        ) : (
          <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
            {notes.map((note) => (
              <NoteCard key={note.id} note={note} />
            ))}
          </div>
        )}
      </div>
    </div>
  );
}
```

## 🧪 테스트 케이스

### 단위 테스트
- [ ] EmptyState 컴포넌트 렌더링 테스트
- [ ] props에 따른 내용 변경 테스트
- [ ] 접근성 속성 테스트

### 통합 테스트
- [ ] 노트 개수 0일 때 빈 상태 표시 테스트
- [ ] CTA 버튼 클릭 시 올바른 페이지 이동 테스트
- [ ] 다양한 variant에 따른 UI 변경 테스트

### E2E 테스트
- [ ] 첫 방문 사용자 시나리오 테스트
- [ ] 모든 노트 삭제 후 빈 상태 테스트
- [ ] 모바일 반응형 테스트

## 🚫 제외사항

- 복잡한 온보딩 터어리얼
- 사용자별 맞춤형 빈 상태 메시지
- 빈 상태에서의 기능 데모
- 애니메이션 효과

## 🔗 의존성

- Story 2.2: 노트 생성 (노트 작성 페이지 필요)
- Story 2.3: 노트 목록 조회 (빈 상태 감지 필요)
- shadcn/ui Button, Card 컴포넌트

## 📅 예상 일정

- **개발:** 0.5일
- **테스트:** 0.5일
- **총 소요시간:** 1일

## ✅ 완료 조건

- [ ] 모든 빈 상태에서 적절한 UI 표시
- [ ] CTA 버튼이 올바르게 작동
- [ ] 반응형 디자인이 모든 기기에서 정상 작동
- [ ] 접근성 기준을 만족
- [ ] 모든 테스트 케이스 통과

## 📝 개발 노트

- 빈 상태는 사용자 경험에 큰 영향을 미치는 중요한 요소
- 첫 인상이 좋아야 사용자가 앱을 계속 사용할 가능성이 높아짐
- 일러스트레이션은 너무 복잡하지 않게 단순하고 명확하게
- CTA 버튼은 눈에 잘 띄고 클릭하기 쉽게 설계
- 향후 A/B 테스트를 고려한 유연한 설계 필요

# Story 2.7: λ…ΈνΈ μ •λ ¬ μµμ… (μµμ‹ μ, μ λ©μ)

## π“‹ μ¤ν† λ¦¬ μ •λ³΄

- **Epic:** Epic 2 - λ…ΈνΈ κ΄€λ¦¬ μ‹μ¤ν…
- **Story ID:** 2.7
- **Story Points:** 3
- **Priority:** P1 (High)
- **Status:** Draft

## π‘¤ μ‚¬μ©μ μ¤ν† λ¦¬

**As a** μ‚¬μ©μ  
**I want to** λ…ΈνΈ λ©λ΅μ„ λ‹¤μ–‘ν• κΈ°μ¤€μΌλ΅ μ •λ ¬ν•  μ μλ” μµμ…μ„ μ κ³µλ°›κ³  μ‹¶λ‹¤  
**So that** λ‚΄κ°€ μ›ν•λ” λ°©μ‹μΌλ΅ λ…ΈνΈλ¥Ό μ •λ¦¬ν•κ³  μ°Ύμ„ μ μλ‹¤

## π“ μƒμ„Έ μ„¤λ…

μ‚¬μ©μκ°€ λ…ΈνΈ λ©λ΅ νμ΄μ§€μ—μ„ λ…ΈνΈλ“¤μ„ λ‹¤μ–‘ν• κΈ°μ¤€μΌλ΅ μ •λ ¬ν•  μ μλ” κΈ°λ¥μ„ μ κ³µν•©λ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ μ‚¬μ©μλ” μμ‹ μ μ‘μ—… λ°©μ‹μ— λ§κ² λ…ΈνΈλ¥Ό μ •λ¦¬ν•κ³  ν¨μ¨μ μΌλ΅ νƒμƒ‰ν•  μ μμµλ‹λ‹¤.

## β… μμ© κΈ°μ¤€

### κΈ°λ¥ μ”κµ¬μ‚¬ν•­

1. **μ •λ ¬ μµμ… μ κ³µ**
   - μµμ‹ μ (κΈ°λ³Έκ°’)
   - μ¤λλμ
   - μ λ© μ¤λ¦„μ°¨μ (A-Z)
   - μ λ© λ‚΄λ¦Όμ°¨μ (Z-A)
   - μμ •μΌ μµμ‹ μ
   - μμ •μΌ μ¤λλμ

2. **UI μ»΄ν¬λ„νΈ**
   - λ“λ΅­λ‹¤μ΄ λλ” λ²„νΌ κ·Έλ£ΉμΌλ΅ μ •λ ¬ μµμ… ν‘μ‹
   - ν„μ¬ μ„ νƒλ μ •λ ¬ κΈ°μ¤€ λ…μ‹
   - μ§κ΄€μ μΈ μ•„μ΄μ½κ³Ό ν…μ¤νΈλ΅ μµμ… κµ¬λ¶„

3. **μƒνƒ κ΄€λ¦¬**
   - μ„ νƒλ μ •λ ¬ κΈ°μ¤€μ΄ URL νλΌλ―Έν„°μ— λ°μ
   - νμ΄μ§€ μƒλ΅κ³ μΉ¨ μ‹μ—λ„ μ •λ ¬ μƒνƒ μ μ§€
   - λΈλΌμ°μ € λ’¤λ΅κ°€κΈ°/μ•μΌλ΅κ°€κΈ° μ§€μ›

4. **μ„±λ¥ μµμ ν™”**
   - μ •λ ¬ λ³€κ²½ μ‹ μ¦‰μ‹ λ°μ (λ΅λ”© μƒνƒ ν‘μ‹)
   - λ°μ΄ν„°λ² μ΄μ¤ λ λ²¨μ—μ„ μ •λ ¬ μ²λ¦¬
   - λ¶ν•„μ”ν• μ¬λ λ”λ§ μµμ†ν™”

### κΈ°μ μ  μ”κµ¬μ‚¬ν•­

1. **μ„λ²„ μ•΅μ… μμ •**
   - `getNotes` ν•¨μμ— μ •λ ¬ μµμ… νλΌλ―Έν„° μ¶”κ°€
   - Drizzle ORMμ `orderBy` κΈ°λ¥ ν™μ©
   - μ •λ ¬ μµμ… μ ν¨μ„± κ²€μ¦

2. **UI μ»΄ν¬λ„νΈ**
   - `Select` λλ” `DropdownMenu` μ»΄ν¬λ„νΈ μ‚¬μ©
   - shadcn/ui λ””μμΈ μ‹μ¤ν… μ¤€μ
   - μ ‘κ·Όμ„± κ³ λ ¤ (ν‚¤λ³΄λ“ λ„¤λΉ„κ²μ΄μ…, μ¤ν¬λ¦° λ¦¬λ”)

3. **URL μƒνƒ κ΄€λ¦¬**
   - Next.js `searchParams` ν™μ©
   - μ •λ ¬ κΈ°μ¤€μ„ URL μΏΌλ¦¬ νλΌλ―Έν„°λ΅ κ΄€λ¦¬
   - κΈ°λ³Έκ°’ μ²λ¦¬ λ° μ ν¨μ„± κ²€μ¦

## π― μ‚¬μ©μ μ‹λ‚λ¦¬μ¤

### μ‹λ‚λ¦¬μ¤ 1: μµμ‹ μμΌλ΅ λ…ΈνΈ μ •λ ¬
1. μ‚¬μ©μκ°€ λ…ΈνΈ λ©λ΅ νμ΄μ§€μ— μ ‘μ†
2. κΈ°λ³Έμ μΌλ΅ μµμ‹ μμΌλ΅ λ…ΈνΈκ°€ ν‘μ‹λ¨
3. μ‚¬μ©μκ°€ μ •λ ¬ λ“λ΅­λ‹¤μ΄μ„ ν΄λ¦­
4. "μµμ‹ μ" μµμ…μ΄ μ„ νƒλ μƒνƒλ΅ ν‘μ‹λ¨

### μ‹λ‚λ¦¬μ¤ 2: μ λ©μμΌλ΅ λ…ΈνΈ μ •λ ¬
1. μ‚¬μ©μκ°€ λ…ΈνΈ λ©λ΅ νμ΄μ§€μ— μ ‘μ†
2. μ •λ ¬ λ“λ΅­λ‹¤μ΄μ„ ν΄λ¦­
3. "μ λ© μ¤λ¦„μ°¨μ" μµμ…μ„ μ„ νƒ
4. λ…ΈνΈλ“¤μ΄ μ λ© κΈ°μ¤€μΌλ΅ A-Z μμΌλ΅ μ •λ ¬λ¨
5. URLμ— `sortBy=title&sortOrder=asc` νλΌλ―Έν„°κ°€ μ¶”κ°€λ¨

### μ‹λ‚λ¦¬μ¤ 3: μμ •μΌ κΈ°μ¤€ μ •λ ¬
1. μ‚¬μ©μκ°€ μ •λ ¬ λ“λ΅­λ‹¤μ΄μ„ ν΄λ¦­
2. "μμ •μΌ μµμ‹ μ" μµμ…μ„ μ„ νƒ
3. μµκ·Όμ— μμ •λ λ…ΈνΈκ°€ λ§¨ μ„μ— ν‘μ‹λ¨
4. νμ΄μ§€λ¥Ό μƒλ΅κ³ μΉ¨ν•΄λ„ μ •λ ¬ μƒνƒκ°€ μ μ§€λ¨

## π”§ κΈ°μ μ  κµ¬ν„

### 1. λ°μ΄ν„°λ² μ΄μ¤ μΏΌλ¦¬ μμ •

```typescript
// app/actions/notes.ts
export async function getNotes(options: {
  page?: number;
  limit?: number;
  sortBy?: 'createdAt' | 'updatedAt' | 'title';
  sortOrder?: 'asc' | 'desc';
  search?: string;
} = {}) {
  // μ •λ ¬ μ΅°κ±΄ κµ¬μ„±
  const orderBy = sortOrder === 'asc' 
    ? asc(notes[sortBy])
    : desc(notes[sortBy]);

  // λ…ΈνΈ λ©λ΅ μ΅°ν
  const notesList = await db
    .select()
    .from(notes)
    .where(and(...whereConditions))
    .orderBy(orderBy)
    .limit(limit)
    .offset(offset);
}
```

### 2. UI μ»΄ν¬λ„νΈ κµ¬ν„

```typescript
// components/notes/note-sort.tsx
export function NoteSort({ 
  currentSort, 
  onSortChange 
}: {
  currentSort: string;
  onSortChange: (sort: string) => void;
}) {
  return (
    <Select value={currentSort} onValueChange={onSortChange}>
      <SelectTrigger className="w-[180px]">
        <SelectValue placeholder="μ •λ ¬ κΈ°μ¤€" />
      </SelectTrigger>
      <SelectContent>
        <SelectItem value="createdAt-desc">μµμ‹ μ</SelectItem>
        <SelectItem value="createdAt-asc">μ¤λλμ</SelectItem>
        <SelectItem value="title-asc">μ λ© μ¤λ¦„μ°¨μ</SelectItem>
        <SelectItem value="title-desc">μ λ© λ‚΄λ¦Όμ°¨μ</SelectItem>
        <SelectItem value="updatedAt-desc">μμ •μΌ μµμ‹ μ</SelectItem>
        <SelectItem value="updatedAt-asc">μμ •μΌ μ¤λλμ</SelectItem>
      </SelectContent>
    </Select>
  );
}
```

### 3. νμ΄μ§€ μ»΄ν¬λ„νΈ μμ •

```typescript
// app/notes/page.tsx
export default async function NotesPage({ searchParams }: NotesPageProps) {
  const params = await searchParams;
  const page = parseInt(params.page || '1', 10);
  const sortBy = (params.sortBy as 'createdAt' | 'updatedAt' | 'title') || 'createdAt';
  const sortOrder = (params.sortOrder as 'asc' | 'desc') || 'desc';

  return (
    <div className="container max-w-6xl mx-auto p-6">
      <div className="flex items-center justify-between mb-8">
        <div className="flex items-center gap-4">
          <h1 className="text-3xl font-bold">λ‚΄ λ…ΈνΈ</h1>
          <NoteSort 
            currentSort={`${sortBy}-${sortOrder}`}
            onSortChange={handleSortChange}
          />
        </div>
        {/* ... */}
      </div>
      {/* ... */}
    </div>
  );
}
```

## π§ ν…μ¤νΈ μΌ€μ΄μ¤

### λ‹¨μ„ ν…μ¤νΈ
- [ ] μ •λ ¬ μµμ… νμ‹± λ΅μ§ ν…μ¤νΈ
- [ ] URL νλΌλ―Έν„° μ ν¨μ„± κ²€μ¦ ν…μ¤νΈ
- [ ] μ •λ ¬ μ»΄ν¬λ„νΈ λ λ”λ§ ν…μ¤νΈ

### ν†µν•© ν…μ¤νΈ
- [ ] μ •λ ¬ λ³€κ²½ μ‹ λ°μ΄ν„°λ² μ΄μ¤ μΏΌλ¦¬ ν…μ¤νΈ
- [ ] URL μƒνƒ λ™κΈ°ν™” ν…μ¤νΈ
- [ ] νμ΄μ§€λ„¤μ΄μ…κ³Ό μ •λ ¬ μ΅°ν•© ν…μ¤νΈ

### E2E ν…μ¤νΈ
- [ ] μ •λ ¬ μµμ… μ„ νƒ λ° κ²°κ³Ό ν™•μΈ
- [ ] λΈλΌμ°μ € λ’¤λ΅κ°€κΈ°/μ•μΌλ΅κ°€κΈ° ν…μ¤νΈ
- [ ] νμ΄μ§€ μƒλ΅κ³ μΉ¨ μ‹ μƒνƒ μ μ§€ ν…μ¤νΈ

## π« μ μ™Έμ‚¬ν•­

- λ³µν•© μ •λ ¬ (μ—¬λ¬ κΈ°μ¤€ λ™μ‹ μ μ©)
- μ‚¬μ©μλ³„ μ •λ ¬ κΈ°λ³Έκ°’ μ„¤μ •
- μ •λ ¬ κΈ°μ¤€ μ»¤μ¤ν„°λ§μ΄μ§•
- μ •λ ¬ νμ¤ν† λ¦¬ μ €μ¥

## π”— μμ΅΄μ„±

- Story 2.2: λ…ΈνΈ μƒμ„± (λ…ΈνΈ λ°μ΄ν„° μ΅΄μ¬ ν•„μ”)
- Story 2.3: λ…ΈνΈ λ©λ΅ μ΅°ν (κΈ°λ³Έ λ©λ΅ κΈ°λ¥ ν•„μ”)
- shadcn/ui Select μ»΄ν¬λ„νΈ

## π“… μμƒ μΌμ •

- **κ°λ°:** 1μΌ
- **ν…μ¤νΈ:** 0.5μΌ
- **μ΄ μ†μ”μ‹κ°„:** 1.5μΌ

## β… μ™„λ£ μ΅°κ±΄

- [ ] λ¨λ“  μ •λ ¬ μµμ…μ΄ μ •μƒ λ™μ‘
- [ ] URL μƒνƒ κ΄€λ¦¬κ°€ μ¬λ°”λ¥΄κ² μ‘λ™
- [ ] UI μ»΄ν¬λ„νΈκ°€ μ ‘κ·Όμ„± κΈ°μ¤€μ„ λ§μ΅±
- [ ] μ„±λ¥ μµμ ν™”κ°€ μ μ©λ¨
- [ ] λ¨λ“  ν…μ¤νΈ μΌ€μ΄μ¤ ν†µκ³Ό

## π“ κ°λ° λ…ΈνΈ

- μ •λ ¬ μµμ…μ€ μ‚¬μ©μ κ²½ν—μ„ ν¬κ² ν–¥μƒμ‹ν‚¬ μ μλ” κΈ°λ¥
- λ°μ΄ν„°λ² μ΄μ¤ λ λ²¨μ—μ„ μ •λ ¬μ„ μ²λ¦¬ν•μ—¬ μ„±λ¥ μµμ ν™”
- URL μƒνƒ κ΄€λ¦¬λ¥Ό ν†µν•΄ λ¶λ§ν¬ λ° κ³µμ  κ°€λ¥
- ν–¥ν›„ κ²€μƒ‰ κΈ°λ¥κ³Όμ ν†µν•©μ„ κ³ λ ¤ν• μ„¤κ³„ ν•„μ”

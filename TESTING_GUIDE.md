# 🧪 스토리 2.9 임시 저장 기능 테스트 가이드

## 📋 테스트 개요
스토리 2.9 "노트 작성 중 임시 저장" 기능의 동작을 확인하는 테스트 가이드입니다.

## 🚀 테스트 환경
- **URL**: http://localhost:3001
- **개발 서버**: Next.js 15.5.4 (Turbopack)
- **포트**: 3001

## 🧪 테스트 시나리오

### 1. 기본 임시 저장 기능 테스트

#### 1.1 새 노트 작성 페이지 접속
1. 브라우저에서 `http://localhost:3001/notes/new` 접속
2. 로그인 페이지로 리다이렉트되면 로그인 진행
3. 새 노트 작성 페이지가 정상적으로 로드되는지 확인

#### 1.2 자동 임시 저장 테스트
1. 제목 필드에 "임시 저장 테스트" 입력
2. 본문 필드에 "이것은 자동 임시 저장을 테스트하는 내용입니다." 입력
3. **3초 대기** (자동 저장 간격)
4. 개발자 도구 열기 (F12)
5. **Application > Local Storage > http://localhost:3001** 이동
6. `[사용자ID]-temp-note-new` 키로 저장된 데이터 확인
7. 저장된 데이터에 제목과 내용이 포함되어 있는지 확인

#### 1.3 저장 상태 표시 확인
1. 노트 작성 중 저장 상태가 표시되는지 확인
2. "저장 중..." → "저장됨" 상태 변화 확인
3. 저장 시간이 표시되는지 확인

### 2. 데이터 복구 기능 테스트

#### 2.1 페이지 새로고침 복구 테스트
1. 위에서 작성한 내용이 있는 상태에서 F5 키로 페이지 새로고침
2. **복구 다이얼로그**가 나타나는지 확인
3. 다이얼로그에 다음 내용이 표시되는지 확인:
   - "임시 저장된 내용이 있습니다" 메시지
   - 제목과 내용 미리보기
   - 저장 시간
   - "복구" / "삭제" 버튼

#### 2.2 복구 기능 테스트
1. 복구 다이얼로그에서 **"복구"** 버튼 클릭
2. 이전에 입력한 제목과 내용이 복원되는지 확인
3. 복구 후 임시 저장 데이터가 삭제되는지 확인

#### 2.3 복구 거부 테스트
1. 다시 페이지를 새로고침하여 복구 다이얼로그 표시
2. **"삭제"** 버튼 클릭
3. 빈 폼으로 시작되는지 확인
4. 임시 저장 데이터가 삭제되는지 확인

### 3. 수정 모드 임시 저장 테스트

#### 3.1 기존 노트 수정
1. `http://localhost:3001/notes` 접속하여 기존 노트 클릭
2. 노트 상세 페이지에서 "수정" 버튼 클릭
3. 제목이나 내용을 수정
4. 3초 후 자동 임시 저장 확인
5. 로컬 스토리지에서 `[사용자ID]-temp-note-[노트ID]` 키 확인

#### 3.2 수정 모드 복구 테스트
1. 수정 중인 상태에서 페이지 새로고침
2. 복구 다이얼로그가 나타나는지 확인
3. 복구 후 수정된 내용이 복원되는지 확인

### 4. 정식 저장 시 임시 데이터 정리 테스트

#### 4.1 새 노트 정식 저장
1. 새 노트 작성 페이지에서 내용 입력
2. "노트 생성" 버튼 클릭
3. 정식 저장 완료 후 로컬 스토리지 확인
4. 임시 저장 데이터가 삭제되었는지 확인

#### 4.2 노트 수정 정식 저장
1. 기존 노트 수정 후 "수정 완료" 버튼 클릭
2. 정식 저장 완료 후 로컬 스토리지 확인
3. 임시 저장 데이터가 삭제되었는지 확인

### 5. 오류 상황 테스트

#### 5.1 네트워크 오프라인 테스트
1. 개발자 도구 > Network 탭에서 "Offline" 체크
2. 노트 작성 중 자동 저장 시도
3. 로컬 스토리지에는 저장되지만 서버 저장은 실패하는지 확인
4. 저장 상태에 오류 표시가 나타나는지 확인

#### 5.2 브라우저 재시작 테스트
1. 노트 작성 중 브라우저 종료
2. 브라우저 재시작 후 새 노트 작성 페이지 접속
3. 복구 다이얼로그가 나타나는지 확인

## ✅ 예상 결과

### 정상 동작
- ✅ 3초마다 자동으로 로컬 스토리지에 임시 저장
- ✅ 페이지 새로고침 시 복구 다이얼로그 표시
- ✅ 복구 시 이전 내용 정확히 복원
- ✅ 정식 저장 시 임시 데이터 자동 삭제
- ✅ 저장 상태 시각적 표시
- ✅ 사용자별 데이터 격리

### 오류 처리
- ✅ 네트워크 오프라인 시 로컬 저장만 실행
- ✅ 저장 실패 시 오류 메시지 표시
- ✅ 만료된 임시 데이터 자동 정리

## 🐛 문제 해결

### 임시 저장이 작동하지 않는 경우
1. 개발자 도구 콘솔에서 오류 메시지 확인
2. 로컬 스토리지 권한 확인
3. 브라우저 캐시 삭제 후 재시도

### 복구 다이얼로그가 나타나지 않는 경우
1. 임시 저장 데이터가 실제로 생성되었는지 확인
2. 페이지 새로고침이 아닌 다른 방법으로 페이지 이동했는지 확인
3. 초기 데이터가 비어있는 상태인지 확인

## 📝 테스트 결과 기록

테스트 완료 후 다음 사항을 확인하고 기록하세요:

- [ ] 자동 임시 저장 기능 정상 동작
- [ ] 복구 다이얼로그 정상 표시
- [ ] 데이터 복구/삭제 기능 정상 동작
- [ ] 정식 저장 시 임시 데이터 정리
- [ ] 저장 상태 시각적 표시
- [ ] 오류 상황 처리

## 🎯 성공 기준

모든 테스트 시나리오가 예상대로 동작하고, 사용자가 데이터 손실 없이 안전하게 노트를 작성할 수 있어야 합니다.

